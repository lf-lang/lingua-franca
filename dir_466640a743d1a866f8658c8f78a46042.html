<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>lingua-franca: /Users/runner/work/lingua-franca/lingua-franca/test Directory Reference</title>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">lingua-franca<span id="projectnumber">&#160;0.10.1</span>
   </div>
   <div id="projectbrief">Lingua Franca code generator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dir_466640a743d1a866f8658c8f78a46042.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">test Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<h1 class="doxsection"><a class="anchor" id="autotoc_md13"></a>
LF integration tests</h1>
<p><b>Integration tests</b> are complete Lingua Franca programs that are compiled and executed automatically. A test passes if it successfully compiles and runs to completion with normal termination (return code 0). These tests are located in a subdirectory corresponding to their target language.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md14"></a>
Running from the command line</h2>
<p>The simplest way to run integration tests for a specific target is the <span class="tt">targetTest</span> gradle task. For instance, you can use the following command to run all Rust tests:</p>
<div class="fragment"><div class="line">./gradlew targetTest -Ptarget=Rust</div>
</div><!-- fragment --><p> You can specify any valid target.</p>
<p>The <span class="tt">targetTest</span> task is essentially a convenient shortcut for the following:</p>
<div class="fragment"><div class="line">./gradlew core:integrationTest --tests &quot;org.lflang.tests.runtime.&lt;target&gt;Test.*&quot;</div>
</div><!-- fragment --><p> If you prefer have more control over which tests are executed, you can also use this more verbose version. Note that the quotation marks are necessary on some shells to prevent the shell from trying to match the <span class="tt">*</span> to file names.</p>
<p>To run a single test case, use the <span class="tt">singleTest</span> gradle task along with the path to the test source file:</p>
<div class="fragment"><div class="line">./gradlew singleTest -DsingleTest=test/C/src/Minimal.lf</div>
</div><!-- fragment --><p>It is also possible to run a subset of the tests. For example, the C tests are organized into the following categories:</p>
<ul>
<li><b>generic</b> tests are <span class="tt">.lf</span> files located in <span class="tt">$LF/test/C/src</span>.</li>
<li><b>concurrent</b> tests are <span class="tt">.lf</span> files located in <span class="tt">$LF/test/C/src/concurrent</span>.</li>
<li><b>federated</b> tests are <span class="tt">.lf</span> files located in <span class="tt">$LF/test/C/src/federated</span>.</li>
<li><b>multiport</b> tests are <span class="tt">.lf</span> files located in <span class="tt">$LF/test/C/src/multiport</span>.</li>
</ul>
<p>To invoke only the C tests in the <span class="tt">concurrent</span> category, for example, do this:</p>
<div class="fragment"><div class="line">./gradlew core:integrationTest --tests org.lflang.tests.runtime.CTest.runConcurrentTests</div>
</div><!-- fragment --><p>Test categories are declared in the <a href="https://github.com/lf-lang/lingua-franca/blob/2611f38cb1e331afbf2fc18f0c9e9ec2758de348/org.lflang.tests/src/org/lflang/tests/TestRegistry.java#L130">TestCategory enum in TestRegistry.java</a>. Each <span class="tt">.lf</span> file is identified by the matching containing directory closest to it, or, if there is no such directory, it will be identified as <span class="tt">generic</span>. E.g., <span class="tt">test/C/src/multiport/Foo.lf</span> falls in the <span class="tt">multiport</span> category.</p>
<p>Tests are normally expected to compile without errors and return exit code <span class="tt">0</span> when executed. Some test categories (e.g., <span class="tt">arduino</span>) are not attempted to run and are only expected to compile as they might require the presence of particular hardware or exotic software configurations that are not manageable in GitHub Actions, our current platform for Continuous Integration (CI). Only pushes to feature branches associated with an active pull request trigger CI.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md15"></a>
LSP tests</h2>
<p>LSP tests run target language tools to lint and find errors in target code such as reaction bodies. They work by inserting errors into files in this directory, running LFC on them in LSP mode, and verifying that errors are reported correctly. When a test fails, an error message is printed that explains why; such an error message will include the string "the expected error could not be found." The contents of the altered LF file (including the inserted error) are printed, with an arrow <span class="tt">-&gt;</span> marking the line on which an error message should have been reported.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md16"></a>
See also</h2>
<ul>
<li><a href="https://www.lf-lang.org/docs/handbook/regression-tests?target=c">Regression Tests (Handbook)</a> </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_d522931ffa1371640980b621734a4381.html">Users</a></li><li class="navelem"><a href="dir_308bc1499b5f97ed0ba0865f54916185.html">runner</a></li><li class="navelem"><a href="dir_61c33e2faf3f402353c3e4f8a1de3ade.html">work</a></li><li class="navelem"><a href="dir_853ef5e5b21dcc61de70b9f0e5587274.html">lingua-franca</a></li><li class="navelem"><a href="dir_9af2677f166f3f6682dd377062a6a6b8.html">lingua-franca</a></li><li class="navelem"><a href="dir_466640a743d1a866f8658c8f78a46042.html">test</a></li>
    <li class="footer">Generated on <span class="timestamp"></span> for lingua-franca by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
