target Rust {
    cargo-features: ["test-program"],
    keepalive: true
};

main reactor {

    physical action act: u32;

    reaction(startup) -> act {=
        let act = act.clone();
        ctx.spawn_physical_thread(move |link| {
            std::thread::sleep(Duration::from_millis(20));
            link.schedule_physical_with_v(&act, Some(434), Asap);
        });
    =}

    reaction(act) {=
        let value = ctx.get(act).unwrap();
        println!("---- Vu {} Ã  {}", value, ctx.display_tag(ctx.get_logical_time()));

        let elapsed_time = ctx.get_elapsed_logical_time();
        assert!(elapsed_time >= Duration::from_millis(20));
        println!("success");
        ctx.request_stop();
    =}
}
